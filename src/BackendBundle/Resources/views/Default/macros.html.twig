{% macro showMessage(key, type) %}
    {# success info danger warning #}
    {% for message in app.session.flashbag.get(key) %}
        <div class="row">
            <div class="col-lg-12">
                <div class="alert alert-{{type}} alert-dismissable alert">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                    <i class="fa fa-info-circle"></i>  {{message|raw}}
                </div>
            </div>
        </div>
    {% endfor %}
{% endmacro %}

{% macro breadcrum(items)%}
    <ol class="breadcrumb">
        {% if items is empty %}
            <li class="active">
                <i class="fa fa-home"></i> {{'backend.global.home'|trans}}
            </li>
        {% else %}
            <li class="active">
                <a href="{{path('backend_homepage')}}"><i class="fa fa-home"></i> {{'backend.global.home'|trans}}</a>
            </li>
        {% endif %}

        {% for item in items %}
            <li {% if loop.last %}class="active"{% endif %}>
                {% if item.url is defined and item.url is not empty and item.url != '#' %}
                    <a href="{{item.url}}"><i class="{{item.icon}}"></i> {{item.text}}</a>
                {% else %}
                    <i class="{{item.icon}}"></i> {{item.text}}
                {% endif %}
            </li>
        {% endfor %}
    </ol>
{% endmacro %}

{% macro textListedItems(pagination) %}
    {% if pagination.getTotalItemCount > 0 %}
        {% set previousPage = pagination.getCurrentPageNumber() - 1 %}
        {% set itemsPerPage = pagination.getItemNumberPerPage %}
        {% set startItem = 0 %}

        {% set startItem = (previousPage * itemsPerPage) + 1 %}


        {% if (pagination.getCurrentPageNumber() * itemsPerPage) <= pagination.getTotalItemCount() %}
            {% set itemsOnPage = pagination.getCurrentPageNumber() * itemsPerPage %}
        {% else %}
            {% set itemsOnPage = pagination.getTotalItemCount() %}
        {% endif %}

        {{'backend.global.showing'|trans}} {{ startItem }} {{'backend.global.to'|trans}} {{ itemsOnPage }} {{'backend.global.of'|trans}} {{ pagination.getTotalItemCount }}
    {% endif %}
{% endmacro %}

{% macro sortIcon(key, pagination) %}
    {% set params = pagination.params %}

    {% if params.sort is defined %}

        {% if params.sort == key %}
            {% if params.direction == 'asc'%}
                <i class="fa fa-sort-asc"></i>
            {% else %}
                <i class="fa fa-sort-desc"></i>
            {% endif %}
        {% endif %}
    {% endif %}
{% endmacro %}  

{% macro itemButtonGroup(item, project, sprint) %}
    <div class="btn-group pull-right small-btn-group">
        <a class="btn btn-default btn-sm border-radius-left" title="{{ 'backend.item.edit'|trans }}" href="{{ path('backend_project_product_backlog_edit',{'id':project.id, 'itemId':item.id, 'sprintId':sprint.id}) }}">
            <i class="fa fa-pencil"></i>
        </a>
        <button type="button" class="btn btn-default btn-sm dropdown-toggle border-radius-right" data-toggle="dropdown">
            <span class="caret"></span>
            <span class="sr-only"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
            <li><a href="{{path('backend_project_product_backlog_new_related_item',{'id':project.id,'itemId':item.id})}}" class="create-related-item fancybox.iframe"><i class="fa fa-star-o"></i> {{'backend.item.create_related_item'|trans}}</a></li>
            <li class="disabled"><a href="#"><i class="fa fa-chain"></i> Relacionar a un item existente</a></li>
            <li class="divider"></li>
            <li class="disabled"><a href="#"><i class="fa fa-comment-o"></i> Agregar Comentario</a></li>
            <li class="disabled"><a href="#"><i class="fa fa-paperclip"></i> Adjuntar Archivo</a></li>
            <li class="disabled"><a href="#"><i class="fa fa-reorder"></i> Cambiar Prioridad</a></li>
            <li class="disabled"><a href="#"><i class="fa fa-clock-o"></i> Cambiar Estimacion</a></li>
            <li class="disabled"><a href="#"><i class="fa fa-clock-o"></i> Cambiar Tiempo Transcurrido</a></li>
            <li class="divider"></li>
            <li class="disabled"><a href="#"><i class="fa fa-cut"></i> Mover a otro Sprint</a></li>
            <li class="disabled"><a href="#"><i class="fa fa-copy"></i> Duplicar en otro Sprint</a></li>
            <li class="divider"></li>
            <li class="disabled"><a href="#"><i class="fa fa-times"></i> Eliminar</a></li>
        </ul>
    </div>
{% endmacro %} 